<!doctype html><title>webaudio.js basic</title>
<script src="../build/webaudio.js"></script>
<body><script>
	// init the library
	var webaudio	= new WebAudio();
	// create a sound
	var sound	= webaudio.createSound();
	// load sound.wav and play it
	sound.load('sounds/techno.mp3', function(sound){
		sound.loop(true).play();
	});
	
	// bind the visibility
	var visibilitychangeStr	= (document.visibilitychange !== undefined ? 'visibilitychange' :
		(document.mozHidden	!== undefined ? 'mozvisibilitychange' :
		(document.msHidden	!== undefined ? 'msvisibilitychange' :
		(document.webkitHidden	!== undefined ? 'webkitvisibilitychange' :
		console.assert(false, "Page Visibility API unsupported")
	))))
	document.addEventListener(visibilitychangeStr, function(){
		var hidden	= (document.hidden !== undefined ? 'hidden' :
			(document.mozHidden	!== undefined ? 'mozHidden' :
			(document.msHidden	!== undefined ? 'msHidden' :
			(document.webkitHidden	!== undefined ? 'webkitHidden' :
			console.assert(false, "Page Visibility API unsupported")
		))))
		if (document[hidden]) {
			webaudio.mute(true);
		} else {
			webaudio.mute(false);
		}
	}, false);
</script></body>